<div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-11-22T16:00:00.000Z" title="2021/11/23 上午12:00:00">2021-11-23</time>发表</span><span class="level-item"><time dateTime="2021-12-12T03:14:35.942Z" title="2021/12/12 上午11:14:35">2021-12-12</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6/">拥塞控制</a><span> / </span><a class="link-muted" href="/categories/%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6/%E7%AA%81%E5%8F%91%E6%B5%81/">突发流</a></span><span class="level-item">13 分钟读完 (大约1953个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">MATCP</h1><div class="content"><!--toc-->

<p><img src="/2021/11/23/11.23MATCP/image-20211123193502325.png" alt="image-20211123193502325"></p>
<p><img src="/2021/11/23/11.23MATCP/image-20211124201332743.png" alt="image-20211124201332743"></p>
<span id="more"></span>

<h1><span id="背景">背景</span></h1><p>微突发流量在数据中心并不少见。它可能导致数据包丢失，这可能导致<strong>严重的性能下降</strong>（例如，Incast问题）。</p>
<ul>
<li><p>然而，目前缓解微突发的方法通常是临时的，而不是基于对底层行为的原则性理解。例如，减少RTOmin，限制并发流的数量并在应用层中增加抖动，在交换机缓冲区中吸收微突发，通过在源端口处调整数据包的速度来缓解微突发。</p>
</li>
<li><p>另一方面，传统的研究侧重于单个流中的流量突发性，而数据中心中的微突发流量可能以多输入端的通信模式出现，其动态行为难以弄清楚。</p>
</li>
</ul>
<p>作者考虑到数据中心里网络流量的模式，研究了基于窗口的传输协议控制下的微突发流量。主要贡献总结在三个方面：</p>
<p>（1）self-clocking和拥塞控制算法共同主导了微突发的变化</p>
<p>（2）在数据中心网络环境中，传统的机制（如吸收和调整）是无效的。从根本上讲，对于数据中心中对延迟敏感的短消息的传输，理想的解决方案是及时检测拥塞并尽快适当地限制发送速率。</p>
<p>（3）存在一个不变的变量（即队列长度演化的时间导数或斜率），可以精确描述大多数情况下微突发的动态行为。</p>
<h1><span id="工作内容">工作内容</span></h1><h2><span id="matcp">MATCP</span></h2><h3><span id="观测方法">观测方法</span></h3><p>对于通过交换机的每个数据包，我们让数据包在其有效负载中携带时间戳和当前队列长度。当数据包到达接收方时，接收方从中提取时间戳和队列长度，并将数据存储到磁盘中。实验结束后，收集数据进行进一步分析。【TPP， ACM SIGCOMM, 2014.】</p>
<h3><span id="观测结果">观测结果</span></h3><p>当扇入流聚集在队列中时，队列长度演化可分为两个阶段：Non-clocked阶段和ACK-clocked阶段。在Non-clocked阶段，队列长度的增加是由第一轮数据包的到达引起的。Non-clocked阶段队列长度演化的斜率直接反映了通信模式（如同步或异步）和强度（如扇入度）。具体来说，使用同步通信和更多并发流，此阶段的斜率更高。</p>
<p>在ACK-clocked阶段，到达流量受瓶颈容量限制。</p>
<p>在不同的网络场景下，各种情况的微突发：</p>
<p><img src="/2021/11/23/11.23MATCP/image-20211125072844928.png" alt="image-20211125072844928"></p>
<p>1）同步扇入流</p>
<p>2）异步扇入流</p>
<p>3）具有一个背景流的扇入流</p>
<p>4）具有多个背景流的扇入流</p>
<p>5）前一跳时有多个背景流拥挤的扇入流</p>
<p>斜率在网络中可以总结为以下三个规律：</p>
<ul>
<li>在没有背景流的情况下，ACK-clocked阶段的斜率等于瓶颈容量</li>
<li>当某些背景流在同一跳上拥塞时，ACK-clocked阶段的斜率小于瓶颈容量</li>
<li>在前一跳有多个背景流拥塞的情况下，ACK-clocked阶段的斜率可能大于瓶颈容量，但不大于2R，R即瓶颈容量。</li>
</ul>
<p><strong>传统的机制（如吸收和调整）是无效的。</strong></p>
<ul>
<li><ul>
<li>TCP pacing不够强大</li>
</ul>
</li>
<li><ul>
<li><p>ECN标记法：  这种基于队列长度的ECN标记的响应不足以抑制队列长度的急剧增加，因为直到队列长度达到阈值时才标记数据包。此外，在队列长度达到阈值后，所有发送方都需要时间才能接收来自交换机的反馈。在此期间，队列长度仍在急剧增加，在所有发送方减速之前，缓冲区可能会溢出。</p>
<p><img src="/2021/11/23/11.23MATCP/image-20211124162903975.png" alt="image-20211124162903975"></p>
</li>
</ul>
</li>
</ul>
<p>斜率直接反映了聚合流量的突发程度。具体地说，ACK-clocked阶段的斜率反映了流的并发性，反映了发送速率和瓶颈容量之间的不匹配。</p>
<p>通过根据斜率小心地减慢发送者的速度，可以有效地抑制微突发引起的队列长度急剧增加。</p>
<h3><span id="核心思想">核心思想</span></h3><p>微突发感知传输控制协议(MATCP),利用队列长度演变的斜率作为检测拥塞的指标，来预测队列长度演化，因为斜率（在ACK时钟阶段）非常稳定。</p>
<p>发送方可以在队列长度达到ECN阈值之前根据斜率适当减速。</p>
<h3><span id="设计机制">设计机制</span></h3><p><img src="/2021/11/23/11.23MATCP/image-20211124163340343.png" alt="image-20211124163340343"></p>
<p><img src="/2021/11/23/11.23MATCP/image-20211124163401422.png" alt="image-20211124163401422"></p>
<p>发送方可以在队列长度达到ECN阈值之前根据斜率适当减速。</p>
<p>switch：MATCP交换机负责将坡度反馈给发送方。交换机有两个功能：更新斜率和将斜率注入通过交换机的数据包中。</p>
<p><img src="/2021/11/23/11.23MATCP/image-20211124165945021.png" alt="image-20211124165945021"></p>
<p>在MATCP中，我们使用两种方法来适应队列长度抖动：</p>
<p>（1）在计算斜率时，我们使用平均队列长度而不是瞬时队列长度。平均队列长度通过指数加权移动平均（EWMA）计算</p>
<p><img src="/2021/11/23/11.23MATCP/image-20211124170159331.png" alt="image-20211124170159331"></p>
<p>（2）以RTT的粒度更新斜率</p>
<p><img src="/2021/11/23/11.23MATCP/image-20211124170210616.png" alt="image-20211124170210616"></p>
<p>只有当交换机的斜率大于数据包携带的斜率时，交换机才会将斜率注入数据包。</p>
<p>接收端：接收数据包时，接收端从包头提取斜率。当准备发送ACK时，接收端将最近的斜率放入报头。</p>
<p>发送端：接收ACK数据包时，发送方从数据包头提取斜率。在接收任何ECN信号之前，MATCP发送方利用斜率来降低发送速率。接收到ECN信号后，斜率无用。降低速率的策略</p>
<p><img src="/2021/11/23/11.23MATCP/image-20211124190258794.png" alt="image-20211124190258794"></p>
<p>假设交换机在时间t0反馈斜率，发送端在时间t1接收斜率，估计t1时刻的队列长度为 ：</p>
<p><img src="/2021/11/23/11.23MATCP/image-20211124190833434.png" alt="image-20211124190833434"></p>
<p>d表示有排队延迟的往返时间，d0表示不排队的往返时间</p>
<p><img src="/2021/11/23/11.23MATCP/image-20211124192710213.png" alt="image-20211124192710213"></p>
<p><img src="/2021/11/23/11.23MATCP/image-20211124192910671.png" alt="image-20211124192910671"></p>
<p><img src="/2021/11/23/11.23MATCP/image-20211124192648072.png" alt="image-20211124192648072"></p>
<p>假设有N个发送端，Wi(t)表示发送端i在时间t时的拥塞窗口大小，如果<img src="/2021/11/23/11.23MATCP/image-20211124193657606.png" alt="image-20211124193657606"></p>
<p><img src="/2021/11/23/11.23MATCP/image-20211124193830799.png" alt="image-20211124193830799"></p>
<p>t1时刻，发送端会减少他的窗口大小，</p>
<p><img src="/2021/11/23/11.23MATCP/image-20211124193846278.png" alt="image-20211124193846278"></p>
<p><img src="/2021/11/23/11.23MATCP/image-20211124194954274.png" alt="image-20211124194954274"></p>
<p>在所有发送方减速后，队列长度返回到交换机反馈斜率时的值。</p>
<p>因此，将拥塞窗口切割为<img src="/2021/11/23/11.23MATCP/image-20211124190258794.png" alt="image-20211124190258794">可以有效地抑制队列长度的急剧增加，而不会导致缓冲区下溢。</p>
<p>会议版：</p>
<p>只统计了规定的场景下五种扇入流对应的斜率形状，没有找出队列长度斜率变化对应的链路拥塞情况。</p>
<p>期刊版：</p>
<p><img src="/2021/11/23/11.23MATCP/image-20211202105355155.png" alt="image-20211202105355155"></p>
<p><img src="/2021/11/23/11.23MATCP/image-20211202104834029.png" alt="image-20211202104834029"></p>
<p>For example, when fan-in ﬂows start synchronously,bursts from diﬀerent ﬂows may arrive simultaneously.As a result, there are impulses during queue length in-creasing (Figure 2(a)). When fan-in ﬂows start asyn-chronously, bursts from diﬀerent ﬂows may arrive separately. As a result, queue length increases in a smoother way (Figure 2(b)). Besides, queue length evolution is also diﬀerent when there are background ﬂows. Moreover, as depicted in Figure 2(a), slope of queue increasing (i.e., queue length increasing rate) can reﬂect the fan-in degree, since with more concurrent ﬂows the queue length tends to increase faster</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>MATCP</p><p><a href="http://example.com/2021/11/23/11.23MATCP/">http://example.com/2021/11/23/11.23MATCP/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>周 升温</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2021-11-23</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2021-12-12</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%E7%AA%81%E5%8F%91%E6%B5%81/">突发流</a><a class="link-muted mr-2" rel="tag" href="/tags/%E9%98%9F%E5%88%97%E9%95%BF%E5%BA%A6/">队列长度</a><a class="link-muted mr-2" rel="tag" href="/tags/%E6%96%9C%E7%8E%87/">斜率</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/11/29/11.29%E7%BB%88%E7%AB%AF%E4%B8%BB%E6%9C%BA%E7%9A%84AQM/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">终端主机的AQM</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/11/16/11.16On-Ramp/"><span class="level-item">On-Ramp</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="SOHUCS" sid="2021/11/23/11.23MATCP/"></div><script charset="utf-8" src="https://changyan.sohu.com/upload/changyan.js"></script><script>window.changyan.api.config({appid: 'cyvNTrKXF',conf: 'prod_beafff693eade74de3a3de7ec158cb96'});</script></div></div>